

<!-- Back to top button -->   
<div class="back-to-top fixed bottom-[4.5rem] right-0 w-[4.5rem] grid grid-flow-row justify-center text-sm invisible xl:visible">
    <div class="-rotate-90 whitespace-nowrap mb-12"><a href="#home" class="back-to-top">Back To Top</a></div>
    <div><a href="#home" class="grid justify-center"><i class="back-to-top fas fa-angle-up"></i></a></div>
</div>

<script>
  // @ts-nocheck
// Hides back to top button on home page //
    // Callback function to handle intersection changes
    function handleIntersection(entries: string, observer: string) {
      const backToTopBtn = document.querySelector('.back-to-top');

      // Check if the home section is intersecting with the viewport
      const isHomeSectionVisible = entries.some(entry => entry.isIntersecting);

      backToTopBtn?.classList.toggle('slide-in', isHomeSectionVisible);
    }

    // Options for the Intersection Observer
    const options = {
      root: null, // Use the viewport as the root
      threshold: 0.5, // Trigger when at least 50% of the target is visible
    };

    // Create an Intersection Observer with the callback function and options
    const observer = new IntersectionObserver(handleIntersection, options);

    // Target element (home section)
    const homeSection = document.getElementById('home');

    // Start observing the target element
    if (homeSection) {
      observer.observe(homeSection);
    }

// Toggles between light and dark pages on scroll //
    // Function to handle scroll and toggle light and dark pages for specific sections
    function handleScrollToggle() {
      const sections = document.querySelectorAll('section');
      let currentSectionId = '';
    
      sections.forEach((section) => {
        const rect = section.getBoundingClientRect();
    
        if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
          currentSectionId = section.id;
        }
      });
    
    // Toggle light and dark page classes based on the active section
      togglePageClasses('back-to-top', currentSectionId);
    }
    
    // Function to toggle light and dark page classes for a specific section
    function togglePageClasses(className: string, currentSectionId: string) {
      const elements = document.getElementsByClassName(className);
    
      for (const element of elements) {
        // Toggle light and dark page classes based on the active section
        const lightPageSections = ['mission', 'services', 'work', 'contact'];
        const darkPageSections = ['home', 'solutions'];

        element.classList.toggle('light-page', lightPageSections.includes(currentSectionId));
        element.classList.toggle('dark-page', darkPageSections.includes(currentSectionId));
      }
    }

    // Scroll event listener
    document.addEventListener('scroll', handleScrollToggle);
</script>