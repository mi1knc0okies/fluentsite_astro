---
import { Image } from "astro:assets";
import FILogo from "../images/FIlogo9.png"  
---
<!-- Navbar mobile -->
<div tabindex="0" class="lg:hidden collapse collapse-plus fixed bg-white rounded-none text-black shadow">
  <div class="collapse-title py-2">
    <a href="/"><Image src={FILogo} alt="Fluent Innovations" height={64}></a>
  </div>
  <div class="collapse-content"> 
        <ul tabindex="0" class="py-2 z-[1] text-gray-500">
            <li class="mb-4"><a href="#home">Home</a></li>
            <li class="mb-4"><a href="#mission">Our mission</a></li>
            <li class="mb-4"><a href="#services">What we do</a></li>
            <li class="mb-4"><a href="#solutions">Our solutions</a></li>
            <li class="mb-4"><a href="#work">Our work</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>  
  </div>
</div>
<!-- Navbar lg, xl -->
<div class="hidden lg:navbar fixed lg:pl-8 xl:px-32 lg:py-4 xl:py-6 bg-white xl:bg-transparent shadow xl:shadow-none">
  <a href="/"><Image src={FILogo} alt="Fluent Innovations" height={84}></a>
  <nav class="navbar-end w-full flex">
    <ul class="menu-horizontal text-base leading-8">
      <li><a href="#home" class="nav-link active px-0 mx-4">Home</a></li>
      <li><a href="#mission" class="nav-link px-0 mx-4">Our mission</a></li>
      <li><a href="#services" class="nav-link px-0 mx-4">What we do</a></li>
      <li><a href="#solutions" class="nav-link px-0 mx-4">Our solutions</a></li>
      <li><a href="#work" class="nav-link px-0 mx-4">Our work</a></li>
      <li><a href="#contact" class="nav-link px-0 mx-4">Contact</a></li>
    </ul>
  </nav>
</div>

<script>
    // Sets active link text decoration //
    document.addEventListener('scroll', function() {
      const sections = document.querySelectorAll('section');

      sections.forEach((section) => {
        const rect = section.getBoundingClientRect();
        
        if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
          // Section is in view
          const sectionId = section.id;
          setActiveNavLink(sectionId);
        }
      });
    });

    function setActiveNavLink(sectionId: string) {
      const navLinks = document.querySelectorAll('.nav-link');

      navLinks.forEach((navLink) => {
        const linkHref = navLink.getAttribute('href')?.substring(1); // Remove the '#'
        
        if (linkHref === sectionId) {
          navLink.classList.add('active');
        } else {
          navLink.classList.remove('active');
        }
      });
    }

    // Toggles between light and dark mode on scroll //
    // Function to check screen size 
    function isXL() {
      return window.innerWidth >= 1280; // XL breakpoint value
    }
    document.addEventListener('scroll', function () {
      if (isXL()) {
        handleScrollToggle();
      }
    });
    // Function to handle scroll and toggle dark mode for specific sections
    function handleScrollToggle() {
      const sections = document.querySelectorAll('section');
      let currentSectionId = '';

      sections.forEach((section) => {
        const rect = section.getBoundingClientRect();

        if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
          currentSectionId = section.id;
        }
      });

    // Toggle dark mode class based on the active section
      toggleDarkModeClass('nav-link', currentSectionId);
    }

    // Function to toggle dark mode class for a specific section
    function toggleDarkModeClass(className: string, currentSectionId: string) {
      const elements = document.getElementsByClassName(className);

      for (const element of elements) {
        // Toggle dark mode class based on the active section
        element.classList.toggle('dark-mode', currentSectionId === 'home' || currentSectionId === 'solutions');
      }
    }
</script>

<!--
<div class="navbar fixed px-4 py-2 lg:pl-8 xl:px-32 xl:py-6 bg-white xl:bg-transparent shadow xl:shadow-none">
        <a href="/"><Image src={FILogo} alt="Fluent Innovations" height={84}></a>
    <div class="navbar-end w-full lg:hidden">
      <div class="dropdown">
        <div tabindex="0" class="lg:hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 32 32" stroke="black"><path stroke-width="2" d="M0 1h15M0 12h30m-15 11h15" /></svg>
        </div>
        <ul tabindex="0" class="menu menu-sm dropdown-content text-black z-[1] p-2 bg-white w-56">
            <li><a href="/" class="hover:text-gray-400">Home</a></li>
            <li><a href="#mission">Our mission</a></li>
            <li><a href="#services">What we do</a></li>
            <li><a href="#solutions">Our solutions</a></li>
            <li><a href="#work">Our work</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
    </div>
    <div class="navbar-end hidden lg:w-full lg:flex">
      <ul class="menu-horizontal text-base text-black xl:text-primary leading-8">
        <li><a href="/" class="hover-underline-animation px-0 mx-4">Home</a></li>
        <li><a href="#mission" class="hover-underline-animation px-0 mx-4">Our mission</a></li>
        <li><a href="#services" class="hover-underline-animation px-0 mx-4">What we do</a></li>
        <li><a href="#solutions" class="hover-underline-animation px-0 mx-4">Our solutions</a></li>
        <li><a href="#work" class="hover-underline-animation px-0 mx-4">Our work</a></li>
        <li><a href="#contact" class="hover-underline-animation px-0 mx-4">Contact</a></li>
      </ul>
    </div>
  </div>
   -->